{
	# Global options
	email crisreyesgotty.37@gmail.com
}

# MeetMind Backend — HTTPS reverse proxy with auto Let's Encrypt
api.aurameet.live {
	# Reverse proxy to FastAPI backend
	reverse_proxy backend:8000 {
		# WebSocket support (automatic in Caddy, but explicit for clarity)
		header_up X-Forwarded-Proto {scheme}
		header_up X-Real-IP {remote_host}

		# Health checks
		health_uri /health
		health_interval 30s
		health_timeout 10s
	}

	# Security headers
	header {
		X-Content-Type-Options nosniff
		X-Frame-Options DENY
		Referrer-Policy strict-origin-when-cross-origin
		Strict-Transport-Security "max-age=31536000; includeSubDomains"
		-Server
	}

	# Access logging
	log {
		output stdout
		format json
	}
}

# HTTP fallback — redirect IP-based access to domain
:80 {
	respond /health "OK" 200
	redir * https://api.aurameet.live{uri} permanent
}
