---
const { t } = Astro.props;
const featureKeys = ['transcription', 'insights', 'summaries', 'languages'];
const featureIcons = [
  '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 1a3 3 0 00-3 3v8a3 3 0 006 0V4a3 3 0 00-3-3z"/><path d="M19 10v2a7 7 0 01-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>',
  '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>',
  '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>',
  '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 014 10 15.3 15.3 0 01-4 10 15.3 15.3 0 01-4-10 15.3 15.3 0 014-10z"/></svg>'
];
const featureColors = ['#8B5CF6', '#06D6A0', '#F97316', '#EC4899'];
---

<section class="section features-section" id="features">
  <div class="container">
    <div class="section-header animate-on-scroll">
      <h2 class="section-title">{t.features.title}</h2>
      <p class="section-subtitle">{t.features.subtitle}</p>
    </div>
    <div class="bento-grid">
      {featureKeys.map((key, i) => (
        <div class={`bento-card glass-card animate-on-scroll ${i === 0 ? 'bento-featured' : ''}`} style={`animation-delay: ${i * 0.1}s`}>
          <div class="bento-glow" style={`--glow-color: ${featureColors[i]}`} aria-hidden="true"></div>
          <div class="feature-icon-wrap" style={`--accent-color: ${featureColors[i]}`}>
            <div class="feature-icon" set:html={featureIcons[i]} />
          </div>
          <h3 class="feature-title">{t.features.items[key].title}</h3>
          <p class="feature-desc">{t.features.items[key].description}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  /* ─── Bento Grid Layout (2026 Trend) ─── */
  .bento-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-md);
  }
  .bento-card {
    padding: var(--space-xl) var(--space-lg);
    position: relative;
    overflow: hidden;
    transition: transform var(--transition-medium), box-shadow var(--transition-medium);
    border: 1px solid var(--border-dark);
  }
  .bento-card:hover {
    transform: translateY(-6px);
    box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    border-color: rgba(255,255,255,0.1);
  }
  .bento-glow {
    position: absolute;
    bottom: -60px;
    right: -60px;
    width: 180px;
    height: 180px;
    border-radius: 50%;
    background: var(--glow-color);
    opacity: 0.03;
    filter: blur(60px);
    pointer-events: none;
    transition: opacity var(--transition-medium), transform var(--transition-medium);
  }
  .bento-card:hover .bento-glow {
    opacity: 0.1;
    transform: scale(1.3);
  }
  .feature-icon-wrap {
    width: 52px;
    height: 52px;
    border-radius: 14px;
    background: color-mix(in srgb, var(--accent-color) 12%, transparent);
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: var(--space-md);
    transition: background var(--transition-medium), transform var(--transition-medium);
  }
  .bento-card:hover .feature-icon-wrap {
    background: color-mix(in srgb, var(--accent-color) 22%, transparent);
    transform: scale(1.08);
  }
  .feature-icon {
    width: 24px;
    height: 24px;
    color: var(--accent-color);
  }
  .feature-icon :global(svg) { width: 100%; height: 100%; }
  .feature-title {
    font-size: var(--fs-h3);
    font-weight: 700;
    margin-bottom: var(--space-xs);
  }
  .feature-desc {
    color: var(--text-secondary);
    font-size: var(--fs-small);
    line-height: 1.7;
  }

  /* ─── Bento Featured Card ─── */
  .bento-featured {
    border-color: rgba(139, 92, 246, 0.15);
  }
  .bento-featured .feature-icon-wrap {
    width: 60px;
    height: 60px;
    border-radius: 16px;
  }
  .bento-featured .feature-icon {
    width: 28px;
    height: 28px;
  }
  .bento-featured .feature-title {
    font-size: var(--fs-h2);
  }

  /* ─── Responsive Bento ─── */
  @media (min-width: 640px) {
    .bento-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    .bento-featured {
      grid-column: span 2;
    }
  }
  @media (min-width: 1024px) {
    .bento-grid {
      grid-template-columns: repeat(3, 1fr);
    }
    .bento-featured {
      grid-column: span 2;
    }
  }
</style>

